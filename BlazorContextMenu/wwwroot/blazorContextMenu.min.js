"use strict";var blazorContextMenu=function(c){var d=null,d=window.Element&&!Element.prototype.closest?function(e,t){var n,r=(e.document||e.ownerDocument).querySelectorAll(t);do{for(n=r.length;0<=--n&&r.item(n)!==e;);}while(n<0&&(e=e.parentElement));return e}:function(e,t){return e.closest(t)},f=[];function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function t(e,t){var c=null;return function e(t,n,r){for(var i=0;i<t.children.length&&!r;i++){for(var o=t.children[i],u=null!=o.className&&"string"==typeof o.className?o.className.split(" "):[],a=0,l=u.length;a<l;a++)if(u[a]==n){r=!0,c=t.children[i];break}if(r)break;e(t.children[i],n,r)}}(e,t,!1),c}function s(e,t){var l=new Array;return function e(t,n){for(var r=0;r<t.children.length;r++){for(var i=t.children[r],o=null!=i.className&&"string"==typeof i.className?i.className.split(" "):[],u=0,a=o.length;u<a;u++)o[u]==n&&l.push(t.children[r]);e(t.children[r],n)}}(e,t),l}function o(e,t,n){var r=u();f.push({id:t,target:n,instanceId:r}),e.dataset.instanceId=r}var a=null,l=(c.SetMenuHandlerReference=function(e){a=a||e},c.ManualShow=function(e,t,n){var r=document.getElementById(e);if(!r)throw new Error("No context menu with id '"+e+"' was found");o(r,e,null),l(r,e,t,n,null,null)},c.OnContextMenu=function(e,t,n){var r=document.getElementById(t);if(!r)throw new Error("No context menu with id '"+t+"' was found");o(r,t,e.target);var i=JSON.parse(e.currentTarget.dataset.dotnetref);return l(r,t,e.x,e.y,e.target,i),e.preventDefault(),n&&e.stopPropagation(),!1},function(e,t,n,r,i,o){return c.Show(t,n,r,i,o).then(function(){return i=function(){return 0<e.clientWidth},o=1e3,new Promise(function(e,t){var n=new Date,r=setInterval(function(){i()?(clearInterval(r),e()):new Date-n>o&&(clearInterval(r),t())},20)});var i,o}).then(function(){0<e.offsetLeft+e.clientWidth-window.innerWidth&&(e.style.left=e.offsetLeft-e.clientWidth+"px"),0<e.offsetTop+e.clientHeight-window.innerHeight&&(e.style.top=e.offsetTop-e.clientHeight+"px")})}),h=(c.Init=function(){function t(e,t){if(0<f.length)for(var n=0;n<f.length;n++){var r=f[n],i=document.getElementById(r.id);i&&"true"==i.dataset.autohide&&i.dataset.autohideevent==t&&!i.contains(e.target)&&c.Hide(r.id)}}document.addEventListener("mouseup",function(e){t(e,"mouseup")}),document.addEventListener("mousedown",function(e){t(e,"mousedown")}),window.addEventListener("resize",function(){if(0<f.length)for(var e=0;e<f.length;e++){var t=f[e],n=document.getElementById(t.id);n&&"true"==n.dataset.autohide&&c.Hide(t.id)}},!0)},c.Show=function(e,t,n,r,i){var o=null;return r&&(r.id||(r.id=u()),o=r.id),a.invokeMethodAsync("ShowMenu",e,t.toString(),n.toString(),o,i)},c.Hide=function(e){var i=document.getElementById(e),o=i.dataset.instanceId;return a.invokeMethodAsync("HideMenu",e).then(function(e){if(i.classList.contains("blazor-context-menu")&&e){e=f.find(function(e){return e.instanceId==o});if(e)for(var t=f,n=e,r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}})},c.IsMenuShown=function(e){var t=document.getElementById(e).dataset.instanceId,e=f.find(function(e){return e.instanceId==t});return void 0!==e&&null!=e},null);return c.OnMenuItemMouseOver=function(e,u,a){var l;d(e.target,".blazor-context-menu__wrapper")==d(a,".blazor-context-menu__wrapper")&&"true"==a.getAttribute("itemEnabled")&&(l=t(a,"blazor-context-submenu"))&&(h=setTimeout(function(){h=null;var r=d(a,".blazor-context-menu__wrapper"),o=r.children[0],e=d(a,".blazor-context-menu"),t=a.getBoundingClientRect(),n=t.left+r.clientWidth-u,t=t.top,i=e.dataset.instanceId,e=f.find(function(e){return e.instanceId==i});c.Show(l.id,n,t,e.target).then(function(){0<l.offsetLeft+l.clientWidth-window.innerWidth&&(l.style.left=l.offsetLeft-l.clientWidth-r.clientWidth-u+"px");for(var e=l.offsetTop+l.clientHeight-window.innerHeight,i=(0<e&&(l.style.top=l.offsetTop-e+"px"),function(){for(var e=s(a,"blazor-context-submenu"),t=e.length;t--;){var n=e[t];c.Hide(n.id)}for(t=o.children.length;t--;){var r=o.children[t];r!=a&&r.removeEventListener("mouseover",i)}}),t=o.children.length;t--;){var n=o.children[t];n!=a&&n.addEventListener("mouseover",i)}})},200))},c.OnMenuItemMouseOut=function(e){h&&clearTimeout(h)},c.RegisterTriggerReference=function(e,t){e&&(e.dataset.dotnetref=JSON.stringify(t.serializeAsArg()))},c}({});blazorContextMenu.Init();